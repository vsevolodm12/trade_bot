<!-- Inline nav header -->
<div class="flex items-center mb-8">
  <button onclick="closeSheet()"
          class="flex items-center gap-0.5 text-accent text-[15px] font-medium active:opacity-50 transition-opacity">
    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="15 18 9 12 15 6"/>
    </svg>
    Назад
  </button>
  <span class="flex-1 text-center text-[15px] font-semibold text-ink">Добавить акцию</span>
  <div style="width:60px"></div>
</div>

<!-- Search section (pushed toward center) -->
<div class="mt-10">

  <!-- Поиск по тикеру -->
  <form hx-post="/partials/search"
        hx-target="#ticker-result"
        hx-swap="innerHTML"
        hx-indicator="#search-spinner"
        class="space-y-3">

    <input type="text"
           name="ticker"
           placeholder="AAPL · SBER · NVDA · 0700.HK"
           autocapitalize="characters"
           autocorrect="off"
           spellcheck="false"
           autofocus
           style="font-family: inherit"
           class="w-full px-4 py-3 rounded-xl border border-line bg-surface text-ink text-sm outline-none focus:border-accent transition-colors">

    <button type="submit"
            class="w-full py-3 rounded-xl bg-ink text-white text-sm font-semibold transition-opacity active:opacity-70">
      Найти
    </button>

  </form>

  <!-- Spinner + результат поиска — прямо под формой -->
  <div id="search-spinner" class="htmx-indicator flex justify-center py-4">
    <div class="w-6 h-6 border-2 border-line border-t-accent rounded-full"
         style="animation: spin .75s linear infinite"></div>
  </div>

  <div id="ticker-result" class="mt-3"></div>

</div>

<!-- Разделитель -->
<div class="flex items-center gap-3 my-6">
  <div class="flex-1 h-px bg-line"></div>
  <span class="text-xs text-faint">или</span>
  <div class="flex-1 h-px bg-line"></div>
</div>

<!-- Загрузка из Excel -->
<div>
  <label for="excel-file"
         class="flex items-center justify-center gap-2 w-full py-3 rounded-xl bg-surface text-ink text-sm font-semibold cursor-pointer transition-opacity active:opacity-70">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
      <polyline points="14 2 14 8 20 8"/>
      <line x1="16" y1="13" x2="8" y2="13"/>
    </svg>
    Загрузить список из Excel
  </label>

  <!-- Скрытый инпут — при выборе файла HTMX автоматически сабмитит форму -->
  <form id="excel-form"
        hx-post="/upload/excel"
        hx-target="#sheet-body"
        hx-swap="innerHTML"
        hx-encoding="multipart/form-data"
        hx-indicator="#excel-spinner">
    <input type="file"
           id="excel-file"
           name="file"
           accept=".xlsx,.xls"
           class="hidden"
           onchange="htmx.trigger('#excel-form', 'submit')">
  </form>

  <div class="mt-3 space-y-1">
    <p class="text-xs text-faint text-center font-medium">Формат файла:</p>
    <p class="text-xs text-faint text-center">A — тикер &nbsp;·&nbsp; B — цель роста ▲ &nbsp;·&nbsp; C — цель падения ▼</p>
    <p class="text-xs text-faint text-center">Колонки B и C можно заполнять по одной или обе сразу</p>
  </div>
</div>

<!-- Excel спиннер -->
<div id="excel-spinner" class="htmx-indicator flex flex-col items-center gap-2 py-6">
  <div class="w-6 h-6 border-2 border-line border-t-accent rounded-full"
       style="animation: spin .75s linear infinite"></div>
  <p class="text-xs text-faint">Ищем акции и добавляем алерты…</p>
</div>
